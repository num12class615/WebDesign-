<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Navbar with Popup Menu</title>
    <link rel="stylesheet" href="./styles.css" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0"
    />
  </head>

  <body>
    <template id="navbarTemplate">
      <div>
        <header>
          <div class="app-bar-logo-container">
            <div class="hamburger" id="hamburger">
              <span class="material-symbols-outlined"> menu </span>
            </div>
            <img
              src="./Picture/img logo/หัวเรื่องย่อย.jpg"
              alt="Logo Radiant รูปมงกุฎบนเพชรสีทอง"
              class="logo-container"
            />
          </div>
          <div class="head_icon">
            <i class="bi bi-search"></i>
            <i class="bi bi-basket2"></i>
            <i class="bi bi-person-circle"></i>
          </div>
        </header>
        <nav>
          <ul>
            <li>จิวเวลรี่</li>
            <li>แต่งงาน</li>
            <li>เพชร</li>
            <li>ของขวัญ</li>
            <li>บทความ</li>
            <li>สิทธิประโยชน์สำหรับสมาชิก</li>
          </ul>
        </nav>
      </div>

      <div id="overlay"></div>

      <div class="modal" id="modal">
        <div class="modal-content">
          <div class="header">
            <div class="app-title">
              <img
                src="./Picture/img logo/หัวเรื่องย่อย.jpg"
                alt="Logo Radiant รูปมงกุฎบนเพชรสีทอง"
                class="app-logo"
              />
              <div class="app-name">Radiant Diamond</div>
            </div>
            <div id="closeIcon">
              <span class="material-symbols-outlined"> close </span>
            </div>
          </div>
          <!-- First Level -->
          <div class="menu">
            <ul class="first-level">
              <li id="jewelry">
                <a href="#">
                  จิวเวลรี่
                  <hr class="menu-divider" />
                </a>
              </li>
              <li id="wedding">
                <a href="#"
                  >แต่งงาน
                  <hr class="menu-divider"
                /></a>
              </li>
              <li id="diamond">
                <a href="#"
                  >เพชร
                  <hr class="menu-divider"
                /></a>
              </li>
              <li id="gift">
                <a href="#"
                  >ของขวัญ
                  <hr class="menu-divider"
                /></a>
              </li>
              <li id="article">
                <a href="#"
                  >บทความ
                  <hr class="menu-divider"
                /></a>
              </li>
              <li id="benefits">
                <a href="#"
                  >สิทธิประโยชน์สมาชิก
                  <hr class="menu-divider"
                /></a>
              </li>
            </ul>
          </div>
          <!-- <div id="menuHeader"></div> -->
          <div class="sub-menu-section">
            <!-- <div id="secondDivider" class="verticle-divider"></div> -->
            <!-- Second Level -->
            <div id="secondLevel" class="menu-level-section">
              <div class="menu" id="jewelryMenu">
                <ul>
                  <li id="ring">
                    <a href="#"
                      >แหวน
                      <hr class="menu-divider"
                    /></a>
                  </li>
                  <li id="earring">
                    <a href="#"
                      >ต่างหู
                      <hr class="menu-divider"
                    /></a>
                  </li>
                  <li id="necklace">
                    <a href="#"
                      >สร้อยคอ
                      <hr class="menu-divider"
                    /></a>
                  </li>
                  <li id="bracelet">
                    <a href="#"
                      >สร้อยข้อมือ
                      <hr class="menu-divider"
                    /></a>
                  </li>
                </ul>
              </div>

              <div class="menu" id="weddingMenu">
                <ul>
                  <li id="weddingRing">
                    <a href="#"
                      >แหวนแต่งงาน/แหวนหมั้น
                      <hr class="menu-divider"
                    /></a>
                  </li>
                  <li id="singleDiamondRing">
                    <a href="#"
                      >แหวนเพชรเม็ดเดียว
                      <hr class="menu-divider"
                    /></a>
                  </li>
                  <li id="rowDiamondRing">
                    <a href="#"
                      >แหวนเพชรแถว
                      <hr class="menu-divider"
                    /></a>
                  </li>
                  <li id="goldRing">
                    <a href="#"
                      >แหวนทอง
                      <hr class="menu-divider"
                    /></a>
                  </li>
                </ul>
              </div>

              <div class="menu" id="giftMenu">
                <ul>
                  <li id="momDay">
                    <a href="#"
                      >วันแม่
                      <hr class="menu-divider"
                    /></a>
                  </li>
                  <li id="valentine">
                    <a href="#"
                      >วาเลนไทน์
                      <hr class="menu-divider"
                    /></a>
                  </li>
                  <li id="woman">
                    <a href="#"
                      >ผู้หญิง
                      <hr class="menu-divider"
                    /></a>
                  </li>
                  <li id="man">
                    <a href="#"
                      >ผู้ชาย
                      <hr class="menu-divider"
                    /></a>
                  </li>
                  <li id="anniversary">
                    <a href="#"
                      >วันครบรอบ
                      <hr class="menu-divider"
                    /></a>
                  </li>
                  <li id="budget">
                    <a href="#"
                      >ของขวัญตามงบประมาณ
                      <hr class="menu-divider"
                    /></a>
                  </li>
                </ul>
              </div>
            </div>
            <div id="thirdDivider" class="verticle-divider"></div>
            <!-- Third Level -->
            <div class="menu-level-section">
              <div class="menu" id="ringMenu">
                <ul>
                  <li id="minimal">
                    <a href="#"
                      >Minimal
                      <hr class="menu-divider"
                    /></a>
                  </li>
                  <li id="modern">
                    <a href="#"
                      >Modern
                      <hr class="menu-divider"
                    /></a>
                  </li>
                  <li id="prettyRing">
                    <a href="#"
                      >Pretty ring
                      <hr class="menu-divider"
                    /></a>
                  </li>
                </ul>
              </div>

              <div class="menu" id="earringMenu">
                <ul>
                  <li id="stud">
                    <a href="#"
                      >Stud ต่างหูติดหู
                      <hr class="menu-divider"
                    /></a>
                  </li>
                  <li id="long">
                    <a href="#"
                      >Long ต่างหูยาว
                      <hr class="menu-divider"
                    /></a>
                  </li>
                  <li id="hoop">
                    <a href="#"
                      >Hoop ต่างหูห่วง
                      <hr class="menu-divider"
                    /></a>
                  </li>
                </ul>
              </div>

              <div class="menu" id="weddingRingMenu">
                <ul>
                  <li id="couple">
                    <a href="#"
                      >เซ็ตคู่
                      <hr class="menu-divider"
                    /></a>
                  </li>
                  <li id="weddingWoman">
                    <a href="#"
                      >ผู้หญิง
                      <hr class="menu-divider"
                    /></a>
                  </li>
                  <li id="weddingMan">
                    <a href="#"
                      >ผู้ชาย
                      <hr class="menu-divider"
                    /></a>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </template>
    <script>
      // script.js
      const hamburger = document.getElementById("hamburger");

      const firstLevel = [
        "jewelry",
        "wedding",
        "diamond",
        "gift",
        "article",
        "benefits",
      ];

      const firstLevelNestMenu = {
        jewelry: "jewelryMenu",
        wedding: "weddingMenu",
        gift: "giftMenu",
      };

      const firstLevelLabel = {
        jewelry: "จิวเวลรี่",
        wedding: "แต่งงาน",
        diamond: "เพชร",
        gift: "ของขวัญ",
        article: "บทความ",
        benefits: "สิทธิประโยชน์สมาชิก",
      };

      const secondLevel = [
        "ring",
        "earring",
        "necklace",
        "bracelet",
        "weddingRing",
        "singleDiamondRing",
        "rowDiamondRing",
        "goldRing",
        "momDay",
        "valentine",
        "woman",
        "man",
        "anniversary",
        "budget",
      ];

      const secondLevelNestMenu = {
        ring: "ringMenu",
        earring: "earringMenu",
        weddingRing: "weddingRingMenu",
      };

      const thirdLevel = [
        "minimal",
        "modern",
        "prettyRing",
        "stud",
        "long",
        "hoop",
        "couple",
        "weddingWoman",
        "weddingMan",
      ];

      const modal = document.getElementById("modal");
      const overlay = document.getElementById("overlay");

      // set hamburger click listener
      hamburger.addEventListener("click", function () {
        modal.classList.toggle("active");
        overlay.classList.toggle("active");
      });

      modal.addEventListener("click", function (event) {
        if (event.target === modal) {
          modal.classList.remove("active");
          overlay.classList.remove("active");
        }
      });

      const closeIcon = document.getElementById("closeIcon");
      closeIcon.addEventListener("click", function (event) {
        modal.classList.remove("active");
        overlay.classList.remove("active");
      });

      // set first level click listener
      firstLevel.forEach((choice) => {
        const firstLevelChoice = document.getElementById(choice);
        firstLevelChoice.addEventListener("click", function () {
          selectFirstChoice(choice);
        });
      });

      function selectFirstChoice(choice) {
        const selectChoice = document.getElementById(choice);
        // const menuHeader = document.getElementById("menuHeader");
        resetFirstLevelActive();
        resetSecondLevelActive();

        resetSecondSection();
        resetThirdSection();

        // showSecondDivider();
        selectChoice.querySelector("a").classList.add("active");
        // menuHeader.innerHTML = firstLevelLabel[choice];

        if (firstLevelNestMenu[choice] !== undefined) {
          const nestMenu = document.getElementById(firstLevelNestMenu[choice]);
          nestMenu.classList.add("active");
          hideThirdDivider();
        } else {
          // hideSecondDivider();
          hideThirdDivider();
        }
      }

      function resetFirstLevelActive() {
        firstLevel.forEach((choice) => {
          const firstLevelChoice = document.getElementById(choice);
          firstLevelChoice.querySelector("a").classList.remove("active");
        });
      }

      function resetSecondSection() {
        Object.keys(firstLevelNestMenu).forEach((key) => {
          const menu = firstLevelNestMenu[key];
          const nestMenu = document.getElementById(menu);
          nestMenu.classList.remove("active");
        });
      }

      // set second level click listener
      secondLevel.forEach((choice) => {
        const secondLevelChoice = document.getElementById(choice);
        if (secondLevelChoice !== undefined) {
          secondLevelChoice.addEventListener("click", function () {
            selectSecondChoice(choice);
          });
        }
      });

      function selectSecondChoice(choice) {
        const selectChoice = document.getElementById(choice);
        resetSecondLevelActive();
        resetThirdLevelActive();

        resetThirdSection();

        showThirdDivider();
        selectChoice.querySelector("a").classList.add("active");

        if (secondLevelNestMenu[choice] !== undefined) {
          const nestMenu = document.getElementById(secondLevelNestMenu[choice]);
          nestMenu.classList.add("active");
        } else {
          hideThirdDivider();
        }
      }

      function resetSecondLevelActive() {
        secondLevel.forEach((choice) => {
          const secondLevelChoice = document.getElementById(choice);
          secondLevelChoice.querySelector("a").classList.remove("active");
        });
      }

      function resetThirdSection() {
        Object.keys(secondLevelNestMenu).forEach((key) => {
          const menu = secondLevelNestMenu[key];
          const nestMenu = document.getElementById(menu);
          nestMenu.classList.remove("active");
        });
      }

      // set third level click listener
      thirdLevel.forEach((choice) => {
        const thirdLevelChoice = document.getElementById(choice);
        if (thirdLevelChoice !== undefined) {
          thirdLevelChoice.addEventListener("click", function () {
            selectThirdChoice(choice);
          });
        }
      });

      function selectThirdChoice(choice) {
        const selectChoice = document.getElementById(choice);
        resetThirdLevelActive();
        selectChoice.querySelector("a").classList.add("active");
      }

      function resetThirdLevelActive() {
        thirdLevel.forEach((choice) => {
          const thirdLevelChoice = document.getElementById(choice);
          thirdLevelChoice.querySelector("a").classList.remove("active");
        });
      }

      // function showSecondDivider() {
      //   const secondDivider = document.getElementById("secondDivider");
      //   secondDivider.classList.add("active");
      // }

      // function hideSecondDivider() {
      //   const secondDivider = document.getElementById("secondDivider");
      //   secondDivider.classList.remove("active");
      // }

      function showThirdDivider() {
        const thirdDivider = document.getElementById("thirdDivider");
        thirdDivider.classList.add("active");
      }

      function hideThirdDivider() {
        const thirdDivider = document.getElementById("thirdDivider");
        thirdDivider.classList.remove("active");
      }
    </script>
  </body>
</html>
